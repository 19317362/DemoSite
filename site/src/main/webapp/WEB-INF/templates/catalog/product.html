<!DOCTYPE HTML>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->

<blc:head pageTitle="${'Broadleaf Demo - Heat Clinic - ' + product.name}" />

<body>
	<div id="notification_bar"></div>
	<header th:substituteby="layout/partials/header" />

	<div id="content" class="width_setter group" role="main">
	
		<nav th:substituteby="layout/partials/nav" />
		
		<section id="left_column" th:object="${product}">
		
			<div id="product_content" class="product_container">
				<h2 th:text="*{name}"></h2>
				
				<div id="maker" th:text="*{manufacturer}"></div>
				
				<div id="price">
					<div blc:price="*{defaultSku.salePrice}" th:if="*{defaultSku.onSale}" th:classappend="*{defaultSku.onSale}? 'sale'"></div>
					<div blc:price="*{defaultSku.retailPrice}" th:classappend="*{defaultSku.onSale}? 'has-sale'"></div>
				</div>
				
				<div class="product-options" th:substituteby="catalog/partials/productOptions"/>								
				
				<form method="POST" th:action="@{/cart/add}">
					<div class="product-option-nonjs" th:each="productOption : *{productOptions}" th:object="${productOption}">
						<div class="form50">
							<label th:text="*{label}"></label>
							<select th:name="${'itemAttributes[' + productOption.attributeName + ']'}">
								<option th:each="optionValue : *{allowedValues}" th:object="${optionValue}" th:text="*{attributeValue}"></option>
							</select>
						</div>
					</div>
					
					<div th:utext="*{longDescription}" id="description"></div>
					
					<div th:class="*{'productActions' + id}">
						<div class="in_cart" th:classappend="${!cart.containsSku(#object.defaultSku)}? ' hidden'"><a class="fancycart fancybox.ajax big-button gray-button" th:href="@{/cart}">In Cart!</a></div>
						<div class="add_to_cart" th:classappend="${cart.containsSku(#object.defaultSku)}? ' hidden'">
							<input type="hidden" name="productId" th:value="*{id}" />
							<input type="hidden" name="quantity" value="1" />
							<input type="submit" class="addToCart big red" value="Buy Now!"/>
						</div>
					</div>
				</form>
				
				<div th:unless="${customer.anonymous}" th:remove="tag">

                    <form method="POST" th:action="@{/account/wishlist/add}">
	                    <div class="product-option-nonjs" th:each="productOption : *{productOptions}" th:object="${productOption}">
	                        <div class="form50">
	                            <label th:text="*{label}"></label>
	                            <select th:name="${'itemAttributes[' + productOption.attributeName + ']'}">
	                                <option th:each="optionValue : *{allowedValues}" th:object="${optionValue}" th:text="*{attributeValue}"></option>
	                            </select>
	                        </div>
	                    </div>
                        <div th:class="${'productActions' + product.id}">

                            <blc:named_order orderVar="wishlist" orderName="wishlist" />

                            <div class="in_wishlist" th:classappend="${!wishlist.containsSku(product.defaultSku)}? ' hidden'">
                                <a class="inWishlist small-button gray-button" th:href="@{/account/wishlist}">In Wishlist!</a>
                            </div>
                            <div class="add_to_wishlist" th:classappend="${wishlist.containsSku(product.defaultSku)}? ' hidden'">
                                <input type="hidden" name="productId" th:value="*{id}" />
                                <input type="hidden" name="quantity" value="1" />
                                <input type="submit" class="addToWishlist small dark" value="+ Add to Wishlist" />
                            </div>
                        </div>
                    </form>
				</div>
					
				<p>
					Share this Sauce:
                    <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                        <a class="addthis_button_preferred_1"></a>
                        <a class="addthis_button_preferred_2"></a>
                        <a class="addthis_button_preferred_3"></a>
                        <a class="addthis_button_preferred_4"></a>
                        <a class="addthis_button_compact"></a>
                        <a class="addthis_counter addthis_bubble_style"></a>
                    </div>
                    <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-5006d3e47d6ace5d"></script>
                </p>
			</div>
		
			<div id="product_main_image">
				<a th:href="@{*{#strings.replace(media['primary'].url, 'img/sauces/', 'img/sauces/zoom/')}}" class='jqzoom' id='zoom1' rel="gal1">
		            <img th:src="@{*{media['primary'].url}}" alt='' align="left" id="main_image" />
		        </a>
			</div>
			
			<ul id="product_thumbs">
				<li>
					<a href="javascript:;" class="zoomThumbActive" 
						th:rel="${'{ gallery: ''gal1'', smallimage: ''__@{*{media['primary'].url}}__'', largeimage: ''__@{*{#strings.replace(media['primary'].url, 'img/sauces/', 'img/sauces/zoom/')}}__'' }'}">
						<img th:src="@{*{media['primary'].url}}" alt="Bottle Closeup" />
					</a>
				</li>
				
				<li th:each="media : *{media}" th:unless="${media.key == 'primary'}">
					<a href="javascript:;"
						th:rel="${'{ gallery: ''gal1'', smallimage: ''__@{${media.value.url}}__'', largeimage: ''__@{${#strings.replace(media.value.url, 'img/sauces/', 'img/sauces/zoom/')}}__'' }'}">
						<img th:src="@{${media.value.url}}" alt="Bottle Closeup" />
					</a>
				</li>
			</ul>
				
		</section>
	
		<section id="right_column">
			<header>Featured Products</header>
			<div id="options">
				<div class="section">
					 <blc:related_products productId="${product.id}"/>	 
					<ul id="featured_products" class="group">
						<li th:each="relatedProduct : ${relatedProducts}" th:object="${relatedProduct.product}" th:include="catalog/partials/productListItem" th:remove="tag"></li>
					</ul>
				</div>									
			</div>
		</section>				
	</div>
	
	<footer th:substituteby="layout/partials/footer" />
	
</body>
</html>
