

<!--  Core Elements -->
<link rel="import" href="/web-components/lib/core-image/core-image.html">
<link rel="import" href="/web-components/lib/core-animated-pages/core-animated-pages.html">
<link rel="import" href="/web-components/lib/core-animated-pages/transitions/slide-from-right.html">

<!-- Paper Elements -->
<link rel="import" href="/web-components/lib/paper-elements/paper-elements.html">

<!-- Third Party -->
<link rel="import" href="/web-components/lib/flatiron-director/flatiron-director.html">

<!-- BLC Elements -->
<link rel="import" href="/web-components/blc/data/blc-data.html">

<!-- Views -->
<link rel="import" href="/web-components/site/views/hc-view-home.html">
<link rel="import" href="/web-components/site/views/hc-view-hot-sauces.html">
<link rel="import" href="/web-components/site/views/hc-view-merchandise.html">
<link rel="import" href="/web-components/site/views/hc-view-clearance.html">
<link rel="import" href="/web-components/site/views/hc-view-new-to-hot-sauce.html">
<link rel="import" href="/web-components/site/views/hc-view-faq.html">
<link rel="import" href="/web-components/site/views/hc-view-search.html">
<link rel="import" href="/web-components/site/views/hc-view-product.html">
<link rel="import" href="/web-components/site/views/hc-view-checkout.html">

<link rel="import" href="/web-components/site/hc-footer.html">
<link rel="import" href="/web-components/site/hc-login.html">
<link rel="import" href="/web-components/site/hc-register.html">
<link rel="import" href="/web-components/site/hc-cart.html">

<polymer-element name="hc-main" on-add-to-cart="{{cartItemAdded}}" on-product-selected="{{selectProduct}}">
	<template>
		<flatiron-director route="{{viewIndex}}" autoHash></flatiron-director>
		
		<div id="header">
			<div id="header-content">
				<core-image id="logo" src="/img/the-heat-clinic-logo-internal.png"></core-image>
				
				<div id="header-links">
					<paper-button on-click="{{openLogin}}">Login</paper-button><span>|</span>
					<paper-button on-click="{{openRegister}}">Register</paper-button><span>|</span>
					<paper-button on-click="{{openCart}}">
						<core-image src="/img/shopping_cart.png"></core-image>
						<span id="cart-count">{{totalCartItems}} item(s)</span>
					</paper-button>
				</div>
				
				<!-- Dialogs -->
				<paper-dialog id="login-dialog" transition="core-transition-center">
					<hc-login id="login"></hc-login>
				</paper-dialog>
				<paper-dialog id="register-dialog" transition="core-transition-center">
					<hc-register id="register"></hc-register>
				</paper-dialog>
				<paper-dialog id="cart-dialog" transition="core-transition-center">
					<hc-cart id="cart" totalItems="{{totalCartItems}}"></hc-cart>
				</paper-dialog>
				
				<div id="search-box">
					<paper-input id="search-input" label="Search..." layout value="{{searchQuery}}" on-click="{{viewSearch}}" on-change="{{viewSearch}}"></paper-input>
				</div>
				
				<paper-tabs selected="{{viewIndex}}" style="clear:both">
					<paper-tab>HOME</paper-tab>
					<paper-tab>HOT SAUCES</paper-tab>
					<paper-tab>MERCHANDISE</paper-tab>
					<paper-tab>CLEARANCE</paper-tab>
					<paper-tab>NEW?</paper-tab>
					<paper-tab>FAQ</paper-tab>
				</paper-tabs>
			</div>
		</div>
		
		<div id="main-section">
			<core-animated-pages selected="{{viewIndex}}" transitions="slide-from-right">
				<section id="home">
					<hc-view-home></hc-view-home>
				</section>
				<section id="hot-sauces" layout vertical center-center>
					<hc-view-hot-sauces></hc-view-hot-sauces>
				</section>
				<section id="merchandise" layout vertical center-center>
					<hc-view-merchandise></hc-view-merchandise>
				</section>
				<section id="clearance" layout vertical center-center>
					<hc-view-clearance></hc-view-clearance>
				</section>
				<section id="new-to-hot-sauce" layout vertical center-center>
					<hc-view-new-to-hot-sauce></hc-view-new-to-hot-sauce>
				</section>
				<section id="faq" layout vertical center-center>
					<hc-view-faq></hc-view-faq>
				</section>
				<section id="search" layout vertical center-center>
					<hc-view-search searchQuery="{{searchQuery}}"></hc-view-search>
				</section>
				<section id="product-detail" layout vertical center-center>
					<hc-view-product productId="{{selectedProduct}}"></hc-view-product>
				</section>
				<section id="chekout" layout vertical center-center>
					<hc-view-checkout></hc-view-checkout>
				</section>
			</core-animated-pages>
			<paper-toast text="" duration="3000"></paper-toast>
		</div>
		
		<hc-footer></hc-footer>
		
		<!-- Global style -->
		<link rel="stylesheet" href="/css/web-components-global-styles.css">
		<style>
			/* Header */
			#header {
				width: 100%;
				border-top: 15px solid #E40037;
			}
			#header-content {
				width: 980px;
				margin: 0 auto;
				position: relative;
			}
			
			#logo {
				width: 299px;
				height: 101px;
				z-index: 50;
				float:left;
			}
			
			hc-cart-info {
				position:absolute;
				top:0px;
				right:0px;
				color:white;
			}
			
			#search-box {
				float:right;
				position:relative;
				top:50px;
			}
			#search-input {
				width:400px;
				font-size: 15px;
				vertical-align:top;
			}
			
			/* Main Content */
			core-animated-pages {
				width: 980px;
				margin: 0 auto;
				position: relative;
				background-color:white;
				padding:10px 20px;
				box-sizing: border-box;
				overflow:hidden;
			}
			
			#main-section core-animated-pages section {
				position:inherit;
			}
		    
			#header-links {
				background-color:#E40037;
				position:absolute;
				top:0px;
				right:0px;
				color:white;
			}
			#cart-count {
				margin-left:5px;
			}
			
			core-animated-pages section > * {
				width:100%;
			}
		</style>
	</template>
	<script>
		Polymer({
		    ready: function() {
		        console.log('created');
		        this.viewIndex = '0';
		    },
		    
			openLogin: function() {
				this.shadowRoot.querySelector('#login-dialog').open();
			},
			openRegister: function() {
				this.shadowRoot.querySelector('#register-dialog').open();
			},
			openCart: function() {
				this.shadowRoot.querySelector('#cart-dialog').open();
			},
			viewSearch: function() {
			    this.shadowRoot.querySelector('core-animated-pages').selected = 6;
			},
			cartItemAdded: function(event, detail) {
				this.shadowRoot.querySelector('hc-cart').refresh();
				this.shadowRoot.querySelector('paper-toast').setAttribute('text', detail.product.name + ' was added to your cart!')
				this.shadowRoot.querySelector('paper-toast').show();
			},
			selectProduct: function(event, detail) {
			    this.selectedProduct = detail;
			}
		});
	</script>
</polymer-element>